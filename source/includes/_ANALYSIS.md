# <a name="analysis"></a>Analysis

Once the Lab is running experiments, it will produce data. This section will details how to analyze and understand the data, before we can contribute to the [Best Solutions](#solutions).

An experiment produces 3 types of data files in the folder `data/<experiment_id>/`:

- **session plots**: `<session_id>.png`
- **trial_data**: `<trial_id>.json`
- **experiment data**:
    - `<experiment_id>_analysis_data.csv`
    - `<experiment_id>_analysis.png`
    - `<experiment_id>_analysis_correlation.png`

<aside class="notice">
Refer to <a href="#structure">Experiments > Structure</a> to see how the files are produced.
</aside>


We will illustrate with an example experiment data from the [Lab Demo](#demo).


## Graphs

Main and correlation, how to read

<div style="max-width: 100%"><img alt="The dqn experiment analytics" src="./images/dqn.png" />
<br><br></div>
<img alt="The dqn experiment analytics correlation" src="./images/dqn_correlation.png" />

_The dqn experiment analytics generated by the Lab. This is a pairplot, where we isolate each variable, flatten the others, plot each trial as a point. The darker the color the higher ratio of the repeated sessions the trial solves._


## Data

jsons and sorted CSV


|fitness_score|mean_rewards_per_epi_stats_mean|mean_rewards_stats_mean|epi_stats_mean|solved_ratio_of_sessions|num_of_sessions|max_total_rewards_stats_mean|t_stats_mean|trial_id|variable_gamma|variable_hidden_layers|variable_lr|
|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|
|5.305994917071314|1.3264987292678285|195.404|154.2|1.0|5|200.0|199.0|dqn-2017_03_19_004714_t79|0.999|[64]|0.02|
|5.105207228739003|1.2763018071847507|195.13600000000002|160.6|1.0|5|200.0|199.0|dqn-2017_03_19_004714_t50|0.99|[32]|0.01|
|4.9561426920909355|1.2390356730227339|195.26000000000002|168.6|1.0|5|200.0|199.0|dqn-2017_03_19_004714_t78|0.999|[64]|0.01|
|4.76714626254895|1.1917865656372375|195.106|172.4|1.0|5|200.0|199.0|dqn-2017_03_19_004714_t71|0.999|[32]|0.02|
|4.717243567762263|1.1793108919405657|195.56400000000002|167.2|1.0|5|200.0|199.0|dqn-2017_03_19_004714_t28|0.97|[32]|0.001|

_Analysis data table, top 5 trials._

On completion, from the analytics, we conclude that the experiment is a success, and the best agent that solves the problem has the parameters:

- *lr*: 0.02
- *gamma*: 0.999
- *hidden_layers_shape*: [64]


## Metrics

Merge metrics and variables? later
